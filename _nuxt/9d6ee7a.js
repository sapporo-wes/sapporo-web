(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{424:function(t,e,n){"use strict";var r=n(0),o=Object(r.b)({data:function(){return{version:"1.2.1"}}}),l=n(75),c=n(137),f=n.n(c),d=n(501),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("v-footer",{attrs:{absolute:"",app:"",color:t.$colors.indigo.darken1,height:"24",padless:""}},[e("div",{staticClass:"mx-auto my-auto"},[e("span",{staticClass:"white--text",style:{fontSize:"12px"}},[t._v("\n        sapporo-web "+t._s(t.version)+" Â© DDBJ (Bioinformatics and DDBJ Center)\n      ")])])])}),[],!1,null,null,null);e.a=component.exports;f()(component,{VFooter:d.a})},433:function(t,e,n){"use strict";n(30),n(19),n(61),n(76),n(42);var r=n(0),o=Object(r.b)({data:function(){return{type:"",id:""}},computed:{items:function(){var t=[{text:"Home",nuxt:!0,to:"/",icon:"mdi-home-outline"}];if("service"===this.type){var e=this.$store.getters["services/service"](this.id);e&&t.push({text:e.name,nuxt:!0,to:"/services?serviceId=".concat(e.id),icon:"mdi-dns-outline"})}else if("workflow"===this.type){var n=this.$store.getters["workflows/workflow"](this.id);if(n){var r=this.$store.getters["services/service"](n.serviceId);r&&t.push({text:r.name,nuxt:!0,to:"/services?serviceId=".concat(r.id),icon:"mdi-dns-outline"}),t.push({text:n.name,nuxt:!0,to:"/workflows?workflowId=".concat(n.id),icon:"mdi-graph-outline"})}}else if("run"===this.type){var o=this.$store.getters["runs/run"](this.id);if(o){var l=this.$store.getters["workflows/workflow"](o.workflowId);if(l){var c=this.$store.getters["services/service"](o.serviceId);c&&t.push({text:c.name,nuxt:!0,to:"/services?serviceId=".concat(c.id),icon:"mdi-dns-outline"}),t.push({text:l.name,nuxt:!0,to:"/workflows?workflowId=".concat(l.id),icon:"mdi-graph-outline"})}t.push({text:o.name,nuxt:!0,to:"/runs?runId=".concat(o.id),icon:"mdi-chart-box-outline"})}}return t}},created:function(){for(var t=this.$route.query,e=0,n=Object.keys(t);e<n.length;e++){var r=n[e];if(r.includes("Id")){this.type=r.slice(0,-2);var o=t[r]||"";Array.isArray(o)&&(o=o[0]||""),this.id=o;break}}}}),l=n(75),c=n(137),f=n.n(c),d=n(623),m=n(504),h=n(407),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("v-breadcrumbs",{staticClass:"pt-2",attrs:{items:t.items,large:""},scopedSlots:t._u([{key:"divider",fn:function(){return[e("v-icon",{domProps:{textContent:t._s("mdi-chevron-right")}})]},proxy:!0},{key:"item",fn:function(n){var r=n.item;return[e("v-breadcrumbs-item",{attrs:{nuxt:r.nuxt,to:r.to}},[e("v-icon",{attrs:{color:t.$colors.grey.darken2,left:""},domProps:{textContent:t._s(r.icon)}}),t._v(" "),e("span",{domProps:{textContent:t._s(r.text)}})],1)]}}])})}),[],!1,null,null,null);e.a=component.exports;f()(component,{VBreadcrumbs:d.a,VBreadcrumbsItem:m.a,VIcon:h.a})},435:function(t,e,n){"use strict";n(47);var r=n(0),o=Object(r.b)({props:{wfType:{type:String,default:""},size:{type:Number,default:26},topMargin:{type:Boolean,default:!0}}}),l=n(75),c=n(137),f=n.n(c),d=n(407),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;t._self._setupProxy;return"CWL"===t.wfType?e("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{height:t.size,src:n(438)}}):"WDL"===t.wfType?e("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{height:t.size,src:n(439)}}):"nextflow"===t.wfType.toLowerCase()||"NFL"===t.wfType?e("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{height:t.size,src:n(440)}}):"snakemake"===t.wfType.toLowerCase()||"SMK"===t.wfType?e("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{height:t.size,src:n(441)}}):e("v-icon",{staticClass:"my-2 mr-2",domProps:{textContent:t._s("mdi-graph-outline")}})}),[],!1,null,null,null);e.a=component.exports;f()(component,{VIcon:d.a})},438:function(t,e,n){t.exports=n.p+"img/cwl-icon.d6a463e.png"},439:function(t,e,n){t.exports=n.p+"img/wdl-icon.3954ce4.png"},440:function(t,e,n){t.exports=n.p+"img/nextflow-icon.5351591.png"},441:function(t,e,n){t.exports=n.p+"img/snakemake-icon.b8289bc.png"},490:function(t,e,n){var content=n(599);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("38705662",content,!0,{sourceMap:!1})},491:function(t,e,n){var content=n(601);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("58015eee",content,!0,{sourceMap:!1})},492:function(t,e,n){var content=n(605);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("7f3668fe",content,!0,{sourceMap:!1})},598:function(t,e,n){"use strict";n(490)},599:function(t,e,n){var r=n(37)(!1);r.push([t.i,".v-label{color:#424242!important}",""]),t.exports=r},600:function(t,e,n){"use strict";n(491)},601:function(t,e,n){var r=n(37)(!1);r.push([t.i,'.field-header[data-v-6d9ce487]{font-size:1.1rem;font-weight:400}.input-field-small[data-v-6d9ce487] .CodeMirror{height:150px!important}.input-field-small[data-v-6d9ce487] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}.input-field-middle[data-v-6d9ce487] .CodeMirror{height:300px!important}.input-field-middle[data-v-6d9ce487] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}',""]),t.exports=r},604:function(t,e,n){"use strict";n(492)},605:function(t,e,n){var r=n(37)(!1);r.push([t.i,'.content-viewer[data-v-eb535b66] .CodeMirror{height:250px!important}.content-viewer[data-v-eb535b66] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}.info-table[data-v-eb535b66] td:first-child{width:270px;font-weight:500}.info-table[data-v-eb535b66] tr:not(:last-child) td{border-bottom:none!important}',""]),t.exports=r},616:function(t,e,n){"use strict";n.r(e);n(30);var r=n(5),o=(n(61),n(76),n(62),n(0)),l=n(205),c=n(424),f=n(433),d=(n(55),n(23),n(6),n(16),n(63),n(138),n(39),n(43),n(204),n(171),n(42),n(48),n(13),n(49),n(56),n(429),n(430),n(431),n(432)),m=n(140),h=n(53);n(299),n(18),n(47);function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var y=Object(o.b)({props:{inputs:{type:Array,required:!0}},data:function(){return{valObj:{},secondaryFilesObj:{}}},computed:{values:function(){var t=this;return function(e){var n;if(t.valObj[e])return t.valObj[e];var r=null===(n=t.inputs.find((function(input){return input.id===e})))||void 0===n?void 0:n.default;return o.a.set(t.valObj,e,[r]),t.valObj[e]}},formType:function(){return function(t){switch(t){case"File":case"Directory":case"string":case"Any":default:return"text";case"int":return"number"}}},secondaryFiles:function(){var t=this;return function(e){var n;if(t.valObj[e]){var r=(null===(n=t.inputs.find((function(input){return input.id===e})))||void 0===n?void 0:n.secondaryFiles)||[];return t.secondaryFilesObj[e]||o.a.set(t.secondaryFilesObj,e,Array(r.length).fill(null)),r}return[]}},secondaryFilesValue:function(){var t=this;return function(e,n){var r,o;return(null===(o=null===(r=t.secondaryFilesObj)||void 0===r?void 0:r[e])||void 0===o?void 0:o[n])||null}},secondaryFilesRules:function(){var t=this;return function(e,n){var r=t.secondaryFiles(e)[n],o=t.secondaryFilesValue(e,n),l=".".concat(null==o?void 0:o.split(".").pop());return r.required&&!o?["This field is required"]:o&&r.pattern!==l?["It must have the extension ".concat(r.pattern)]:[]}}},methods:{updateValue:function(t,e,n){this.valObj[e]&&o.a.set(this.valObj[e],n,t)},updateSecondaryFiles:function(t,e,n){this.secondaryFilesObj[e]&&o.a.set(this.secondaryFilesObj[e],n,t)},addArray:function(t){this.valObj[t]&&this.valObj[t].push(null)},removeArray:function(t){this.valObj[t]&&this.valObj[t].length>1&&this.valObj[t].pop()},validate:function(){return!!this.$refs.form&&this.$refs.form.validate()},toParams:function(){var t=this;if(this.validate()){var e,n={},r=w(this.inputs);try{var o=function(){var input=e.value;if("File"===input.type||"Directory"===input.type)if(input.array){var r=t.valObj[input.id].map((function(t){return{location:t,class:input.type}}));n[input.id]=r}else{var o=t.valObj[input.id][0];if(o){var l={location:o,class:input.type};if(input.secondaryFiles){var c=t.secondaryFilesObj[input.id];Object.assign(l,{secondaryFiles:c.filter((function(t){return null!==t})).map((function(t){return{location:t,class:"File"}}))})}n[input.id]=l}}else if("string"===input.type||"Any"===input.type)if(input.array){var f=t.valObj[input.id];n[input.id]=f}else{var d=t.valObj[input.id][0];n[input.id]=d||null}else if("int"===input.type)if(input.array){var m=t.valObj[input.id];n[input.id]=m.map((function(t){return Number(t)}))}else{var h=t.valObj[input.id][0];n[input.id]=h?Number(h):null}else if("boolean"===input.type){var w=t.valObj[input.id][0];n[input.id]=!!w}};for(r.s();!(e=r.n()).done;)o()}catch(t){r.e(t)}finally{r.f()}return JSON.stringify(n)}return""}}}),x=(n(598),n(75)),_=n(137),k=n.n(_),C=n(408),P=n(606),A=n(595),E=n(407),M=n(470),component=Object(x.a)(y,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("v-form",{ref:"form",staticClass:"flex-grow-1 mr-4"},[t._l(t.inputs,(function(n){return[["File","Directory","string","Any","int"].includes(n.type)?[e("div",{key:n.id,staticClass:"d-flex flex-column"},[e("label",[e("span",{domProps:{textContent:t._s(n.label||n.id)}}),t._v(" "),e("span",{staticClass:"red--text",domProps:{textContent:t._s(n.required?"*":"")}})]),t._v(" "),e("div",{staticClass:"d-flex ml-4 mb-2"},[e("div",{staticClass:"d-flex flex-column flex-grow-1"},[t._l(t.values(n.id),(function(r,o){return[e("v-text-field",{key:"".concat(n.id,"-textfield-").concat(o),staticClass:"pt-1 mt-0",attrs:{hint:0===o?n.doc:"","persistent-hint":"",placeholder:"".concat(n.type),rules:n.required&&!r?["This field is required"]:[],type:t.formType(n.type),value:r},on:{input:function(e){return t.updateValue(e,n.id,o)}}})]})),t._v(" "),n.secondaryFiles?[t._l(t.secondaryFiles(n.id),(function(r,o){return[e("v-text-field",{key:"".concat(n.id,"-secondaryFiles-").concat(o),staticClass:"pt-1 mt-0 ml-4",attrs:{hint:"pattern: ".concat(r.pattern),"persistent-hint":"",placeholder:"SecondaryFiles".concat(r.required?" *":"",": ").concat(r.pattern),rules:t.secondaryFilesRules(n.id,o),value:t.secondaryFilesValue(n.id,o)},on:{input:function(e){return t.updateSecondaryFiles(e,n.id,o)}}})]}))]:t._e()],2),t._v(" "),n.array?e("div",{staticClass:"d-flex"},[e("v-btn",{staticClass:"ml-6",attrs:{color:t.$colors.grey.darken2,outlined:"",small:"",width:"100"},on:{click:function(e){return e.stopPropagation(),t.addArray(n.id)}}},[e("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-text-box-plus-outline")}}),t._v(" "),e("span",{domProps:{textContent:t._s("Add")}})],1),t._v(" "),e("v-btn",{staticClass:"ml-2",attrs:{color:t.$colors.grey.darken2,outlined:"",small:"",width:"100"},on:{click:function(e){return e.stopPropagation(),t.removeArray(n.id)}}},[e("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-text-box-minus-outline")}}),t._v(" "),e("span",{domProps:{textContent:t._s("Remove")}})],1)],1):t._e()])])]:t._e(),t._v(" "),"boolean"===n.type?[t._l(t.values(n.id),(function(t,r){return[e("v-checkbox",{key:"".concat(n.id,"-checkbox-").concat(r),attrs:{hint:0===r?n.doc:"","input-value":t,label:"".concat(n.label||n.id),"persistent-hint":""}})]}))]:t._e()]}))],2)}),[],!1,null,null,null),O=component.exports;function j(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}k()(component,{VBtn:C.a,VCheckbox:P.a,VForm:A.a,VIcon:E.a,VTextField:M.a});var W=Object(o.b)({components:{codemirror:d.codemirror,WfParamsForm:O},props:{workflowId:{type:String,required:!0}},data:function(){return{runName:"",wfEngine:"",attachmentMode:void 0,wfAttachment:{fetch:{urls:[null],names:[null]},upload:{files:[null],names:[null]}},wfParamsMode:null,wfParamsInputs:[],wfParams:"{}",wfEngineParams:"{}",wfEngineParamsExpand:!1,tags:"{}",tagsExpand:!1,executeButton:!0,formError:"",attachAsFile:!1}},computed:{service:function(){return this.$store.getters["services/service"](this.workflow.serviceId)},wesVersion:function(){return this.$store.getters["services/wesVersion"](this.workflow.serviceId)},inputsParsable:function(){return"sapporo-1.0.1"===this.wesVersion&&"CWL"===this.workflow.type},showWfParamsText:function(){return!this.inputsParsable||"text"===this.wfParamsMode},showWfParamsForm:function(){return!!this.inputsParsable&&"form"===this.wfParamsMode},serviceWorkflowAttachment:function(){return this.$store.getters["services/workflowAttachment"](this.workflow.serviceId)},workflow:function(){return this.$store.getters["workflows/workflow"](this.workflowId)},runNames:function(){return this.$store.getters["runs/runsByIds"](this.service.runIds).map((function(t){return t.name}))},runNameRules:function(){return this.runName?this.runNames.includes(this.runName)?["Typed name already exists"]:[]:["Required"]},wfEngines:function(){return this.$store.getters["services/workflowEngines"](this.service.id).map((function(t){return"".concat(t.name," ").concat(t.version)}))},wfEngineRules:function(){return this.wfEngine?[]:["Required"]},wfAttachmentRules:function(){for(var t={fetch:{urls:[],names:[]},upload:{files:[],names:[]}},i=0;i<this.wfAttachment.fetch.names.length;i++)!!this.wfAttachment.fetch.urls[i]!=!!this.wfAttachment.fetch.names[i]?(this.wfAttachment.fetch.urls[i]||(t.fetch.urls.push(["No value in this field"]),t.fetch.names.push([])),this.wfAttachment.fetch.names[i]||(t.fetch.urls.push([]),t.fetch.names.push(["No value in this field"]))):(t.fetch.urls.push([]),t.fetch.names.push([]));for(var e=0;e<this.wfAttachment.upload.names.length;e++)!!this.wfAttachment.upload.files[e]!=!!this.wfAttachment.upload.names[e]?(this.wfAttachment.upload.files[e]||(t.upload.files.push(["No value in this field"]),t.upload.names.push([])),this.wfAttachment.upload.names[e]||(t.upload.files.push([]),t.upload.names.push(["No value in this field"]))):(t.upload.files.push([]),t.upload.names.push([]));return t},wfParamsError:function(){return Object(m.e)(this.wfParams)||Object(m.f)(this.wfParams)?"":"Invalid JSON or YAML"},wfEngineParamsError:function(){return Object(m.e)(this.wfEngineParams)||Object(m.f)(this.wfEngineParams)?"":"Invalid JSON or YAML"},tagsError:function(){return Object(m.e)(this.tags)||Object(m.f)(this.tags)?"":"Invalid JSON or YAML"},formValid:function(){var t=!(this.wfAttachmentRules.fetch.urls.map((function(t){return t.length})).reduce((function(a,b){return a+b}),0)||this.wfAttachmentRules.fetch.names.map((function(t){return t.length})).reduce((function(a,b){return a+b}),0)||this.wfAttachmentRules.upload.files.map((function(t){return t.length})).reduce((function(a,b){return a+b}),0)||this.wfAttachmentRules.upload.names.map((function(t){return t.length})).reduce((function(a,b){return a+b}),0)),e=!0;return"form"===this.wfParamsMode&&this.$refs.wfParamsForm&&(e=this.$refs.wfParamsForm.validate()),!this.runNameRules.length&&!this.wfEngineRules.length&&!this.wfParamsError&&!this.wfEngineParamsError&&!this.tagsError&&t&&e}},watch:{wfEngine:function(){if("sapporo-1.0.1"===this.wesVersion){var t=this.wfEngine.split(" ")[0]||"",e=this.service.serviceInfo.default_workflow_engine_parameters;if(t in e){var n,r={},o=j(e[t]);try{for(o.s();!(n=o.n()).done;){var param=n.value;r[param.name]=param.default_value}}catch(t){o.e(t)}finally{o.f()}this.wfEngineParams=JSON.stringify(r,null,2),this.wfEngineParamsExpand=!0}else this.wfEngineParams="",this.wfEngineParamsExpand=!1}}},created:function(){var t=this;if(this.runName="".concat(this.workflow.name," ").concat(this.$dayjs().local().format("YYYY-MM-DD HH:mm:ss")),1===this.wfEngines.length&&(this.wfEngine=this.wfEngines[0]),"CWL"===this.workflow.type?this.wfEngine=this.wfEngines.find((function(t){return t.includes("cwltool")}))||"":"WDL"===this.workflow.type?this.wfEngine=this.wfEngines.find((function(t){return t.includes("cromwell")}))||"":"NFL"===this.workflow.type?this.wfEngine=this.wfEngines.find((function(t){return t.includes("nextflow")}))||"":"SMK"===this.workflow.type&&(this.wfEngine=this.wfEngines.find((function(t){return t.includes("snakemake")}))||""),this.attachAsFile=!Object(m.g)(this.workflow.url),this.attachAsFile){this.wfAttachment.upload.files.pop(),this.wfAttachment.upload.names.pop();var e=new File([this.workflow.content],this.workflow.url);this.wfAttachment.upload.files.push(e),this.wfAttachment.upload.names.push(this.workflow.url),this.attachmentMode="upload"}if(this.workflow.preRegisteredWorkflowAttachment.length){this.wfAttachment.fetch.urls.pop(),this.wfAttachment.fetch.names.pop();var n,r=j(this.workflow.preRegisteredWorkflowAttachment);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.wfAttachment.fetch.urls.push(o.file_url),this.wfAttachment.fetch.names.push(o.file_name)}}catch(t){r.e(t)}finally{r.f()}this.attachmentMode="fetch"}this.inputsParsable&&(this.wfParamsMode="form",Object(h.g)(this.service.endpoint,{workflow_content:this.workflow.content,types_of_parsing:["inputs"]}).then((function(e){t.wfParamsInputs=e.inputs||[]})).catch((function(e){t.wfParamsMode="text"})),this.wfParams="Making template by cwltool...",Object(h.g)(this.service.endpoint,{workflow_content:this.workflow.content,types_of_parsing:["make_template"]}).then((function(e){t.wfParams=e.inputs})).catch((function(e){t.wfParams="{}"})))},methods:{executeRun:function(){var t=this;if(this.formValid||"Available"===this.service.state||this.executeButton){this.formError="",this.executeButton=!1;for(var e=[],i=0;i<this.wfAttachment.fetch.urls.length;i++)this.wfAttachment.fetch.urls[i]&&e.push({file_url:this.wfAttachment.fetch.urls[i],file_name:this.wfAttachment.fetch.names[i]});var n="form"===t.wfParamsMode?t.$refs.wfParamsForm?t.$refs.wfParamsForm.toParams():"{}":Object(m.f)(t.wfParams)?Object(m.h)(t.wfParams):t.wfParams;this.$store.dispatch("runs/executeRun",{service:this.service,workflow:this.workflow,runName:this.runName,wfEngineName:this.wfEngine.split(" ")[0],wfEngineParams:Object(m.f)(this.wfEngineParams)?Object(m.h)(this.wfEngineParams):this.wfEngineParams,tags:Object(m.f)(this.tags)?Object(m.h)(this.tags):this.tags,wfAttachmentText:JSON.stringify(e,null,2),workflowAttachment:this.wfAttachment.upload.files,fileNames:this.wfAttachment.upload.names,wfParams:n}).then((function(e){t.$router.push({path:"/runs",query:{runId:e}})})).catch((function(e){t.formError=e.message,t.executeButton=!0}))}},updateWfAttachmentUrl:function(t,e){if(o.a.set(this.wfAttachment.fetch.urls,e,t),t)try{var n=new URL(t).pathname.split("/").pop()||"";o.a.set(this.wfAttachment.fetch.names,e,n)}catch(t){}},updateWfAttachmentName:function(t,e){o.a.set(this.wfAttachment[this.attachmentMode].names,e,t)},updateWfAttachmentFile:function(t,e){if(o.a.set(this.wfAttachment.upload.files,e,t),t)try{var n=t.name||"";o.a.set(this.wfAttachment.upload.names,e,n)}catch(t){}},addWfAttachment:function(){"fetch"===this.attachmentMode?(this.wfAttachment.fetch.urls.push(null),this.wfAttachment.fetch.names.push(null)):"upload"===this.attachmentMode&&(this.wfAttachment.upload.files.push(null),this.wfAttachment.upload.names.push(null))},removeWfAttachment:function(){"fetch"===this.attachmentMode&&this.wfAttachment.fetch.names.length>1?(this.wfAttachment.fetch.urls.pop(),this.wfAttachment.fetch.names.pop()):"upload"===this.attachmentMode&&this.wfAttachment.upload.names.length>1&&(this.wfAttachment.upload.files.pop(),this.wfAttachment.upload.names.pop())},codeMirrorMode:function(content){return Object(m.a)(content)}}}),F=(n(600),n(607)),$=n(416),S=n(472),N=n(594),T=n(614),R=n(493),V=n(414),D=n(613),L=Object(x.a)(W,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("v-card",{attrs:{"max-width":"1200"}},[e("div",{staticClass:"d-flex align-center mx-6 pt-4"},[e("v-icon",{attrs:{color:"black",left:""},domProps:{textContent:t._s("mdi-pencil-outline ")}}),t._v(" "),e("div",{staticClass:"card-header",domProps:{textContent:t._s("Compose Run")}})],1),t._v(" "),e("div",{staticClass:"mx-12 mt-4"},[e("v-text-field",{attrs:{hint:"Name of the run (free text, e.g., 'Test run' etc.)",label:"Run Name","persistent-hint":!t.runName.length,placeholder:"Type a name",rules:t.runNameRules},model:{value:t.runName,callback:function(e){t.runName=e},expression:"runName"}}),t._v(" "),e("v-select",{attrs:{hint:"Select the workflow engine",items:t.wfEngines,label:"Workflow Engine (Required)","persistent-hint":!t.wfEngine.length,rules:t.wfEngineRules},model:{value:t.wfEngine,callback:function(e){t.wfEngine=e},expression:"wfEngine"}}),t._v(" "),e("div",{staticClass:"d-flex align-center"},[e("span",{style:{color:"".concat(t.$colors.grey.darken2)},domProps:{textContent:t._s("Workflow Attachment")}}),t._v(" "),e("v-tooltip",{attrs:{"max-width":"400",top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("v-icon",t._g({attrs:{right:"",small:""},domProps:{textContent:t._s("mdi-help-circle-outline")}},r))]}}])},[t._v(" "),e("span",{domProps:{textContent:t._s("[Optional] A set of files to be fetched/uploaded to the execution directory. You can create a directory structure by writing like `dirname/filename` in the file name field.")}})]),t._v(" "),e("v-chip-group",{staticClass:"ml-6",attrs:{color:"primary"},model:{value:t.attachmentMode,callback:function(e){t.attachmentMode=e},expression:"attachmentMode"}},[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("div",t._g({},!t.serviceWorkflowAttachment&&r),[e("v-chip",{staticClass:"my-0 py-0",attrs:{disabled:!t.serviceWorkflowAttachment,label:"",outlined:"",value:"fetch"}},[e("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-download-outline")}}),t._v(" "),e("span",{domProps:{textContent:t._s("Fetch")}})],1)],1)]}}])},[t._v(" "),e("span",{domProps:{textContent:t._s("This WES endpoint does not allow workflow attachment.")}})]),t._v(" "),e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("div",t._g({},!t.serviceWorkflowAttachment&&r),[e("v-chip",{staticClass:"my-0 py-0",attrs:{disabled:!t.serviceWorkflowAttachment,label:"",outlined:"",value:"upload"}},[e("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-upload-outline")}}),t._v(" "),e("span",{domProps:{textContent:t._s("Upload")}})],1)],1)]}}])},[t._v(" "),e("span",{domProps:{textContent:t._s("This WES endpoint does not allow workflow attachment.")}})])],1),t._v(" "),e("v-spacer"),t._v(" "),t.attachmentMode&&t.serviceWorkflowAttachment?e("v-btn",{staticClass:"mr-4",attrs:{color:t.$colors.grey.darken2,outlined:"",small:"",width:"120"},on:{click:function(e){return e.stopPropagation(),t.addWfAttachment.apply(null,arguments)}}},[e("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-text-box-plus-outline")}}),t._v(" "),e("span",{domProps:{textContent:t._s("Add")}})],1):t._e(),t._v(" "),t.attachmentMode&&t.serviceWorkflowAttachment?e("v-btn",{attrs:{color:t.$colors.grey.darken2,outlined:"",small:"",width:"120"},on:{click:function(e){return e.stopPropagation(),t.removeWfAttachment.apply(null,arguments)}}},[e("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-text-box-minus-outline")}}),t._v(" "),e("span",{domProps:{textContent:t._s("Remove")}})],1):t._e()],1),t._v(" "),"fetch"===t.attachmentMode?e("div",{staticClass:"d-flex flex-column"},t._l(t.wfAttachment[t.attachmentMode].names.length,(function(n){return e("div",{key:n,staticClass:"d-flex ml-8"},[e("v-text-field",{staticClass:"my-0 mr-auto",style:{maxWidth:"47%",minWidth:"47%"},attrs:{clearable:"",disabled:!t.serviceWorkflowAttachment,hint:"Network reachable location of the workflow attachment",label:"URL","persistent-hint":!t.wfAttachment[t.attachmentMode].urls[n-1],placeholder:"Type a URL",rules:t.wfAttachmentRules[t.attachmentMode].urls[n-1]},on:{input:function(e){return t.updateWfAttachmentUrl(e,n-1)}},model:{value:t.wfAttachment[t.attachmentMode].urls[n-1],callback:function(e){t.$set(t.wfAttachment[t.attachmentMode].urls,n-1,e)},expression:"wfAttachment[attachmentMode].urls[ind - 1]"}}),t._v(" "),e("v-text-field",{staticClass:"my-0",style:{maxWidth:"47%",minWidth:"47%"},attrs:{clearable:"",disabled:!t.serviceWorkflowAttachment,hint:"The name of the workflow attachment when it is placed in the execution directory",label:"File Name","persistent-hint":!t.wfAttachment[t.attachmentMode].names[n-1],placeholder:"Type a file name",rules:t.wfAttachmentRules[t.attachmentMode].names[n-1]},on:{input:function(e){return t.updateWfAttachmentName(e,n-1)}},model:{value:t.wfAttachment[t.attachmentMode].names[n-1],callback:function(e){t.$set(t.wfAttachment[t.attachmentMode].names,n-1,e)},expression:"wfAttachment[attachmentMode].names[ind - 1]"}})],1)})),0):t._e(),t._v(" "),"upload"===t.attachmentMode?e("div",{staticClass:"d-flex flex-column"},t._l(t.wfAttachment[t.attachmentMode].names.length,(function(n){return e("div",{key:n,staticClass:"d-flex ml-8"},[e("v-file-input",{staticClass:"my-0 mr-auto",style:{maxWidth:"47%",minWidth:"47%"},attrs:{clearable:"",disabled:!t.serviceWorkflowAttachment,hint:"The file to be attached",label:"File","persistent-hint":!t.wfAttachment[t.attachmentMode].files[n-1],placeholder:"Select a file","prepend-icon":null,"prepend-inner-icon":"mdi-paperclip",rules:t.wfAttachmentRules[t.attachmentMode].files[n-1],"show-size":""},on:{change:function(e){return t.updateWfAttachmentFile(e,n-1)}},model:{value:t.wfAttachment[t.attachmentMode].files[n-1],callback:function(e){t.$set(t.wfAttachment[t.attachmentMode].files,n-1,e)},expression:"wfAttachment[attachmentMode].files[ind - 1]"}}),t._v(" "),e("v-text-field",{staticClass:"my-0",style:{maxWidth:"47%",minWidth:"47%"},attrs:{clearable:"",disabled:!t.serviceWorkflowAttachment,hint:"The name of the workflow attachment when it is placed in the execution directory",label:"File Name","persistent-hint":!t.wfAttachment[t.attachmentMode].names[n-1],placeholder:"Type a file name",rules:t.wfAttachmentRules[t.attachmentMode].names[n-1]},on:{input:function(e){return t.updateWfAttachmentName(e,n-1)}},model:{value:t.wfAttachment[t.attachmentMode].names[n-1],callback:function(e){t.$set(t.wfAttachment[t.attachmentMode].names,n-1,e)},expression:"wfAttachment[attachmentMode].names[ind - 1]"}})],1)})),0):t._e(),t._v(" "),e("div",{staticClass:"d-flex align-center mt-4"},[e("span",{style:{color:"".concat(t.$colors.grey.darken2)},domProps:{textContent:t._s("Workflow Parameters")}}),t._v(" "),e("v-tooltip",{attrs:{"max-width":"400",top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("v-icon",t._g({attrs:{right:"",small:""},domProps:{textContent:t._s("mdi-help-circle-outline")}},r))]}}])},[t._v(" "),e("span",{domProps:{textContent:t._s("[Optional] A JSON object for workflow parameters, which will be placed in the execution directory with the filename `workflow_params.json`. If you want to use a parameter file in a format other than JSON/YAML, use the Workflow Attachment field.")}})]),t._v(" "),t.inputsParsable?e("v-chip-group",{staticClass:"ml-6",attrs:{color:"primary"},model:{value:t.wfParamsMode,callback:function(e){t.wfParamsMode=e},expression:"wfParamsMode"}},[e("v-chip",{staticClass:"my-0 py-0",attrs:{disabled:!t.wfParamsInputs.length,label:"",outlined:"",value:"form"}},[e("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-form-select")}}),t._v(" "),e("span",{domProps:{textContent:t._s("Form")}})],1),t._v(" "),e("v-chip",{staticClass:"my-0 py-0",attrs:{label:"",outlined:"",value:"text"}},[e("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-format-text")}}),t._v(" "),e("span",{domProps:{textContent:t._s("Text")}})],1)],1):t._e()],1),t._v(" "),t.showWfParamsForm?e("div",{staticClass:"mx-6"},[e("wf-params-form",{ref:"wfParamsForm",attrs:{inputs:t.wfParamsInputs}})],1):t._e(),t._v(" "),t.showWfParamsText?e("div",{staticClass:"d-flex flex-column ml-8 mt-4"},[e("codemirror",{staticClass:"elevation-2 input-field-middle",style:{outline:"solid 1px ".concat(t.wfParamsError?t.$vuetify.theme.themes.light.error:t.$colors.grey.lighten1)},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(t.wfParams),tabSize:2}},model:{value:t.wfParams,callback:function(e){t.wfParams=e},expression:"wfParams"}}),t._v(" "),e("div",{staticClass:"mt-2 v-messages theme--light",class:{"error--text":!!t.wfParamsError},domProps:{textContent:t._s(t.wfParamsError?t.wfParamsError:"Drag-and-Drop or Copy-and-Paste parameters in JSON/YAML format into this box")}})],1):t._e(),t._v(" "),e("div",{staticClass:"d-flex align-center mt-4"},[e("span",{style:{color:"".concat(t.$colors.grey.darken2)},domProps:{textContent:t._s("Workflow Engine Parameters")}}),t._v(" "),e("v-tooltip",{attrs:{"max-width":"400",top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("v-icon",t._g({attrs:{right:"",small:""},domProps:{textContent:t._s("mdi-help-circle-outline")}},r))]}}])},[t._v(" "),e("span",{domProps:{textContent:t._s("[Optional] A JSON object to pass additional arguments to the workflow engine, where key and value will be joined.")}})]),t._v(" "),e("v-icon",{attrs:{right:""},domProps:{textContent:t._s(t.wfEngineParamsExpand?"mdi-arrow-collapse-vertical":"mdi-arrow-expand-vertical")},on:{click:function(e){t.wfEngineParamsExpand=!t.wfEngineParamsExpand}}})],1),t._v(" "),t.wfEngineParamsExpand?e("div",{staticClass:"d-flex flex-column ml-8 mt-4"},[e("codemirror",{staticClass:"elevation-2 input-field-small",style:{outline:"solid 1px ".concat(t.wfEngineParamsError?t.$vuetify.theme.themes.light.error:t.$colors.grey.lighten1)},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(t.wfEngineParams),tabSize:2}},model:{value:t.wfEngineParams,callback:function(e){t.wfEngineParams=e},expression:"wfEngineParams"}}),t._v(" "),e("div",{staticClass:"mt-2 v-messages theme--light",class:{"error--text":!!t.wfParamsError},domProps:{textContent:t._s(t.wfParamsError?t.wfParamsError:"Drag-and-Drop or Copy-and-Paste parameters in JSON/YAML format into this box")}})],1):t._e(),t._v(" "),e("div",{staticClass:"d-flex align-center mt-4"},[e("span",{style:{color:"".concat(t.$colors.grey.darken2)},domProps:{textContent:t._s("Tags")}}),t._v(" "),e("v-tooltip",{attrs:{"max-width":"400",top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("v-icon",t._g({attrs:{right:"",small:""},domProps:{textContent:t._s("mdi-help-circle-outline")}},r))]}}])},[t._v(" "),e("span",{domProps:{textContent:t._s("[Optional] A JSON object for adding metadata and changing the behavior of the WES itself.")}})]),t._v(" "),e("v-icon",{attrs:{right:""},domProps:{textContent:t._s(t.tagsExpand?"mdi-arrow-collapse-vertical":"mdi-arrow-expand-vertical")},on:{click:function(e){t.tagsExpand=!t.tagsExpand}}})],1),t._v(" "),t.tagsExpand?e("div",{staticClass:"d-flex flex-column ml-8 mt-4"},[e("codemirror",{staticClass:"elevation-2 input-field-small",style:{outline:"solid 1px ".concat(t.tagsError?t.$vuetify.theme.themes.light.error:t.$colors.grey.lighten1)},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(t.tags),tabSize:2}},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}}),t._v(" "),e("div",{staticClass:"mt-2 v-messages theme--light",class:{"error--text":!!t.tagsError},domProps:{textContent:t._s(t.tagsError?t.tagsError:"Drag-and-Drop or Copy-and-Paste parameters in JSON/YAML format into this box")}})],1):t._e()],1),t._v(" "),t.formError.length?e("v-alert",{staticClass:"mx-12 mt-4",attrs:{dense:"",icon:"mdi-fire",outlined:"",text:"",type:"warning"}},[t._v("\n      "+t._s(t.formError)+"\n    ")]):t._e(),t._v(" "),e("div",{staticClass:"d-flex justify-end pb-6 mx-12 mt-4"},[e("v-btn",{attrs:{color:"primary",disabled:!t.formValid||"Available"!==t.service.state||!t.executeButton,outlined:"",width:"140"},on:{click:function(e){return e.stopPropagation(),t.executeRun.apply(null,arguments)}}},[e("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-rocket-launch-outline")}}),t._v(" "),e("span",{domProps:{textContent:t._s("Execute")}})],1)],1)],1)}),[],!1,null,"6d9ce487",null),Y=L.exports;k()(L,{VAlert:F.a,VBtn:C.a,VCard:$.a,VChip:S.a,VChipGroup:N.a,VFileInput:T.a,VIcon:E.a,VSelect:R.a,VSpacer:V.a,VTextField:M.a,VTooltip:D.a});n(77);var B=n(435),J=Object(o.b)({components:{codemirror:d.codemirror,WorkflowIcon:B.a},props:{workflowId:{type:String,required:!0}},data:function(){return{workflowInfoHeaders:[{text:"Key",value:"key"},{text:"Value",value:"value"}],copyTooltip:!1,copied:!1}},computed:{service:function(){return this.$store.getters["services/service"](this.workflow.serviceId)},workflow:function(){return this.$store.getters["workflows/workflow"](this.workflowId)},workflowInfoContents:function(){return[{key:"URL",value:this.workflow.url},{key:this.workflow.preRegistered?"Updated Date":"Added Date",value:this.workflow.preRegistered?this.$dayjs(this.workflow.updatedDate).local().format("YYYY-MM-DD HH:mm:ss"):this.$dayjs(this.workflow.addedDate).local().format("YYYY-MM-DD HH:mm:ss")}]}},methods:{validUrl:function(t){return Object(m.g)(t)},codeMirrorMode:function(content){return Object(m.a)(content)},copyWorkflowContent:function(){var t=this;this.copyTooltip=!1,this.$copyText(this.workflow.content),setTimeout((function(){t.copyTooltip=!0,t.copied=!0,setTimeout((function(){t.copyTooltip=!1,setTimeout((function(){t.copied=!1}),300)}),1e3)}),300)},downloadWorkflowContent:function(){var t=new Blob([this.workflow.content],{type:"text/plane"}),e=window.URL.createObjectURL(t),link=document.createElement("a");link.download=this.workflow.url.split("/").slice(-1)[0],link.href=e,link.click(),link.remove(),window.URL.revokeObjectURL(e)}}}),U=(n(604),n(619)),z=Object(x.a)(J,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("v-card",{attrs:{"max-width":"1200"}},[e("div",{staticClass:"d-flex align-center mx-6 pt-4"},[e("workflow-icon",{attrs:{size:36,"top-margin":!1,"wf-type":t.workflow.type}}),t._v(" "),e("div",{staticClass:"card-header",domProps:{textContent:t._s(t.workflow.name)}}),t._v(" "),t.workflow.preRegistered?e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("v-icon",t._g({staticClass:"ml-2 mt-1",attrs:{color:t.$colors.indigo.darken1},domProps:{textContent:t._s("mdi-account-check-outline")}},r))]}}],null,!1,3490612083)},[t._v(" "),e("span",{domProps:{textContent:t._s("Pre-registered workflow")}})]):t._e()],1),t._v(" "),e("v-data-table",{staticClass:"mx-12 mt-2 info-table",attrs:{"calculate-widths":"","disable-filtering":"","disable-pagination":"","disable-sort":"",headers:t.workflowInfoHeaders,"hide-default-footer":"","hide-default-header":"","item-key":"key",items:t.workflowInfoContents},scopedSlots:t._u([{key:"item.value",fn:function(n){var r=n.item;return["URL"===r.key&&t.validUrl(r.value)?e("a",{attrs:{href:r.value},domProps:{textContent:t._s(r.value)}}):e("span",{domProps:{textContent:t._s(r.value)}})]}}],null,!0)}),t._v(" "),e("div",{staticClass:"d-flex ml-12 mr-3 mt-2 pb-6"},[e("codemirror",{staticClass:"elevation-2 content-viewer flex-grow-1",style:{outline:"solid 1px ".concat(t.$colors.grey.lighten1),maxWidth:"97%"},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(t.workflow.content),tabSize:2,readOnly:!0},value:t.workflow.content}}),t._v(" "),e("div",{staticClass:"d-flex flex-column ml-3"},[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("v-icon",t._g({attrs:{color:t.$colors.grey.darken1},domProps:{textContent:t._s("mdi-download")},on:{click:function(e){return e.stopPropagation(),t.downloadWorkflowContent.apply(null,arguments)}}},r))]}}])},[t._v(" "),e("span",{domProps:{textContent:t._s("Download the workflow document")}})]),t._v(" "),e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("div",t._g({staticClass:"mt-2"},r),[e("v-icon",{attrs:{color:t.$colors.grey.darken1},domProps:{textContent:t._s("mdi-clipboard-outline")},on:{click:function(e){return e.stopPropagation(),t.copyWorkflowContent.apply(null,arguments)}}})],1)]}}]),model:{value:t.copyTooltip,callback:function(e){t.copyTooltip=e},expression:"copyTooltip"}},[t._v(" "),e("span",{domProps:{textContent:t._s(t.copied?"Copied!!":"Copy the workflow document")}})])],1)],1)],1)}),[],!1,null,"eb535b66",null),H=z.exports;k()(z,{VCard:$.a,VDataTable:U.a,VIcon:E.a,VTooltip:D.a});var K=Object(o.b)({components:{AppBar:l.a,AppFooter:c.a,BreadcrumbsHeader:f.a,ExecuteCard:Y,InfoCard:H},middleware:function(t){var e=t.store,n=t.route.query.workflowId||"";Array.isArray(n)&&(n=n[0]||""),window.onNuxtReady(Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch("services/updateService",e.getters["workflows/workflow"](n).serviceId);case 2:case"end":return t.stop()}}),t)}))))},computed:{service:function(){return this.$store.getters["services/service"](this.workflow.serviceId)},workflow:function(){return this.$store.getters["workflows/workflow"](this.workflowId)},workflowId:function(){var t=this.$route.query.workflowId||"";return Array.isArray(t)?t[0]||"":t},existWorkflowId:function(){return this.$store.getters["workflows/workflowIds"].includes(this.workflowId)}}}),G=n(415),Q=n(419),X=n(417),Z=Object(x.a)(K,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("v-app",[e("app-bar"),t._v(" "),e("v-main",{staticClass:"background"},[e("v-container",{attrs:{fluid:""}},[e("breadcrumbs-header"),t._v(" "),t.existWorkflowId?[e("info-card",{staticClass:"mx-auto",attrs:{"workflow-id":t.workflowId}}),t._v(" "),e("v-alert",{staticClass:"mx-auto mt-8",attrs:{"max-width":"1200",type:"error",value:"Available"!==t.service.state}},[t._v(t._s("Workflow cannot be executed because the status of service ".concat(t.service.name," is not available."))+"\n          ")]),t._v(" "),e("execute-card",{staticClass:"mx-auto mt-8 mb-4",attrs:{"workflow-id":t.workflowId}})]:[t._v(t._s("Workflow id: ".concat(t.workflowId," does not exist.")))]],2)],1),t._v(" "),e("app-footer")],1)}),[],!1,null,null,null);e.default=Z.exports;k()(Z,{VAlert:F.a,VApp:G.a,VContainer:Q.a,VMain:X.a})}}]);