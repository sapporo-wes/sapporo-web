(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{430:function(e,t,r){"use strict";var n=r(0),o=Object(n.b)({data:function(){return{version:"1.2.0"}}}),c=r(75),l=r(138),d=r.n(l),v=r(507),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-footer",{attrs:{absolute:"",app:"",color:e.$colors.indigo.darken1,height:"24",padless:""}},[t("div",{staticClass:"mx-auto my-auto"},[t("span",{staticClass:"white--text",style:{fontSize:"12px"}},[e._v("\n        sapporo-web "+e._s(e.version)+" Â© DDBJ (Bioinformatics and DDBJ Center)\n      ")])])])}),[],!1,null,null,null);t.a=component.exports;d()(component,{VFooter:v.a})},439:function(e,t,r){"use strict";r(30),r(19),r(61),r(76),r(42);var n=r(0),o=Object(n.b)({data:function(){return{type:"",id:""}},computed:{items:function(){var e=[{text:"Home",nuxt:!0,to:"/",icon:"mdi-home-outline"}];if("service"===this.type){var t=this.$store.getters["services/service"](this.id);t&&e.push({text:t.name,nuxt:!0,to:"/services?serviceId=".concat(t.id),icon:"mdi-dns-outline"})}else if("workflow"===this.type){var r=this.$store.getters["workflows/workflow"](this.id);if(r){var n=this.$store.getters["services/service"](r.serviceId);n&&e.push({text:n.name,nuxt:!0,to:"/services?serviceId=".concat(n.id),icon:"mdi-dns-outline"}),e.push({text:r.name,nuxt:!0,to:"/workflows?workflowId=".concat(r.id),icon:"mdi-graph-outline"})}}else if("run"===this.type){var o=this.$store.getters["runs/run"](this.id);if(o){var c=this.$store.getters["workflows/workflow"](o.workflowId);if(c){var l=this.$store.getters["services/service"](o.serviceId);l&&e.push({text:l.name,nuxt:!0,to:"/services?serviceId=".concat(l.id),icon:"mdi-dns-outline"}),e.push({text:c.name,nuxt:!0,to:"/workflows?workflowId=".concat(c.id),icon:"mdi-graph-outline"})}e.push({text:o.name,nuxt:!0,to:"/runs?runId=".concat(o.id),icon:"mdi-chart-box-outline"})}}return e}},created:function(){for(var e=this.$route.query,t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];if(n.includes("Id")){this.type=n.slice(0,-2);var o=e[n]||"";Array.isArray(o)&&(o=o[0]||""),this.id=o;break}}}}),c=r(75),l=r(138),d=r.n(l),v=r(629),m=r(510),f=r(413),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-breadcrumbs",{staticClass:"pt-2",attrs:{items:e.items,large:""},scopedSlots:e._u([{key:"divider",fn:function(){return[t("v-icon",{domProps:{textContent:e._s("mdi-chevron-right")}})]},proxy:!0},{key:"item",fn:function(r){var n=r.item;return[t("v-breadcrumbs-item",{attrs:{nuxt:n.nuxt,to:n.to}},[t("v-icon",{attrs:{color:e.$colors.grey.darken2,left:""},domProps:{textContent:e._s(n.icon)}}),e._v(" "),t("span",{domProps:{textContent:e._s(n.text)}})],1)]}}])})}),[],!1,null,null,null);t.a=component.exports;d()(component,{VBreadcrumbs:v.a,VBreadcrumbsItem:m.a,VIcon:f.a})},623:function(e,t,r){"use strict";r.r(t);var n=r(5),o=(r(62),r(6),r(39),r(43),r(0)),c=r(211),l=r(430),d=r(439),v=(r(47),r(30),r(55),Object(o.b)({props:{dialogShow:{type:Boolean,default:!1,required:!0},selectedItems:{type:Array,default:[],required:!0}},methods:{deleteSelectedItems:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("services/deleteServices",e.selectedItems.map((function(e){return e.id})));case 2:e.$emit("close");case 3:case"end":return t.stop()}}),t)})))()}}})),m=r(75),f=r(138),h=r.n(f),x=r(414),_=r(422),w=r(628),y=r(413),component=Object(m.a)(v,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-dialog",{attrs:{"overlay-opacity":"0.8",value:e.dialogShow,width:"600"},on:{"click:outside":function(t){return e.$emit("close")}}},[t("v-card",[t("div",{staticClass:"card-header mx-6 pt-4",domProps:{textContent:e._s("Remove WES endpoints")}}),e._v(" "),t("div",{staticClass:"mx-12 my-2",domProps:{textContent:e._s("Following WES endpoints will be removed:")}}),e._v(" "),t("ul",{style:{paddingLeft:"96px",paddingRight:"96px"}},e._l(e.selectedItems,(function(r,i){return t("li",{key:i,domProps:{textContent:e._s(r.name)}})})),0),e._v(" "),t("div",{staticClass:"mx-12 my-2"},[t("span",{domProps:{textContent:e._s("Workflows and runs associated with this service will also be removed. You can re-register the service, but changes on workflows and runs will NOT be recovered.")}})]),e._v(" "),t("div",{staticClass:"d-flex justify-end mx-12 mt-4 pb-6"},[t("v-btn",{attrs:{color:"error",outlined:""},on:{click:function(t){return t.stopPropagation(),e.deleteSelectedItems.apply(null,arguments)}}},[t("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-trash-can-outline")}}),e._v(" "),t("span",{domProps:{textContent:e._s("Remove")}})],1),e._v(" "),t("v-btn",{staticClass:"ml-4",attrs:{color:"info",outlined:""},on:{click:function(t){return t.stopPropagation(),e.$emit("close")}}},[t("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-close")}}),e._v(" "),t("span",{domProps:{textContent:e._s("Cancel")}})],1)],1)])],1)}),[],!1,null,null,null),C=component.exports;h()(component,{VBtn:x.a,VCard:_.a,VDialog:w.a,VIcon:y.a});r(61),r(76),r(71),r(16),r(65);var k=r(53),S=r(141),P=Object(o.b)({props:{dialogShow:{type:Boolean,default:!1,required:!0}},data:function(){return{name:"",endpoint:"",registerButton:!0,formError:""}},computed:{registerValid:function(){return!this.nameRules.length&&!this.endpointRules.length},serviceNames:function(){return this.$store.getters["services/services"].map((function(e){return e.name}))},nameRules:function(){return this.name?this.serviceNames.includes(this.name)?["Typed name already exists"]:[]:["Required"]},endpointRules:function(){return this.endpoint?this.endpoint.startsWith("http://")||this.endpoint.startsWith("https://")?Object(S.g)(this.endpoint)?[]:["Invalid URL"]:["The endpoint must start with http:// or https://"]:["Required"]}},methods:{submitService:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.e)(e.endpoint.replace(/\/$/,"")).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.formError="",e.registerButton=!1,t.next=4,e.$store.dispatch("services/submitService",{name:e.name,endpoint:e.endpoint.replace(/\/$/,""),preRegistered:!1,serviceInfo:r}).then((function(t){e.$router.push({path:"/services",query:{serviceId:t}})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.formError=t.message,e.registerButton=!0}));case 2:case"end":return t.stop()}}),t)})))()}}}),R=P,D=r(613),$=r(476),V=Object(m.a)(R,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-dialog",{attrs:{"overlay-opacity":"0.8",value:e.dialogShow,width:"600"},on:{"click:outside":function(t){return e.$emit("close")},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("close")}}},[t("v-card",[t("div",{staticClass:"d-flex align-center mx-6 pt-4"},[t("v-icon",{attrs:{color:"black",left:""},domProps:{textContent:e._s("mdi-sticker-plus-outline")}}),e._v(" "),t("div",{staticClass:"card-header",domProps:{textContent:e._s("Register WES endpoint")}})],1),e._v(" "),t("div",{staticClass:"mx-12 my-2"},[t("v-text-field",{attrs:{hint:"Name of the WES endpoint (free text, e.g., 'Test service,' etc.)",label:"Name","persistent-hint":!e.name.length,placeholder:"Type a name",rules:e.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),t("v-text-field",{attrs:{hint:"Location of WES endpoint (e.g., 'http://localhost:1122' etc.)",label:"Endpoint","persistent-hint":!e.endpoint.length,placeholder:"Type a endpoint",rules:e.endpointRules},model:{value:e.endpoint,callback:function(t){e.endpoint=t},expression:"endpoint"}})],1),e._v(" "),e.formError.length?t("v-alert",{staticClass:"mx-12 mt-4",attrs:{dense:"",icon:"mdi-fire",outlined:"",text:"",type:"warning"}},[e._v("\n        "+e._s(e.formError)+"\n      ")]):e._e(),e._v(" "),t("div",{staticClass:"d-flex justify-end mx-12 pb-6 mt-4"},[t("v-btn",{attrs:{color:"primary",disabled:!(e.registerValid&&e.registerButton),outlined:""},on:{click:function(t){return t.stopPropagation(),e.submitService.apply(null,arguments)}}},[t("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-arrow-up")}}),e._v(" "),t("span",{domProps:{textContent:e._s("Submit")}})],1)],1)],1)],1)}),[],!1,null,null,null),I=V.exports;h()(V,{VAlert:D.a,VBtn:x.a,VCard:_.a,VDialog:w.a,VIcon:y.a,VTextField:$.a});var j=Object(o.b)({components:{ServiceDeleteDialog:C,ServiceRegisterDialog:I},data:function(){return{serviceHeaders:[{text:"Name",value:"name",sortable:!0},{text:"Endpoint",value:"endpoint",sortable:!1},{text:"Added Date",value:"addedDate",sortable:!0},{text:"",value:"state",align:"center",sortable:!1,width:"80px"},{text:"",value:"delete",sortable:!1,align:"center",width:"64px"}],selectedServices:[],registerDialogShow:!1,deleteDialogShow:!1}},computed:{services:function(){return this.$store.getters["services/services"]}}}),O=r(478),E=r(625),B=r(619),W=Object(m.a)(j,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-card",{attrs:{"max-width":"1200"}},[t("div",{staticClass:"d-flex mx-6 pt-4"},[t("v-icon",{attrs:{color:"black",left:""},domProps:{textContent:e._s("mdi-dns-outline")}}),e._v(" "),t("div",{staticClass:"card-header",domProps:{textContent:e._s("WES endpoints")}})],1),e._v(" "),e.services.length?e._e():t("div",{staticClass:"my-2"},[t("div",{staticClass:"mx-12"},[t("span",{style:{color:e.$vuetify.theme.themes.light.error,textDecorationLine:"underline",fontSize:"1rem"},domProps:{textContent:e._s("Register a WES endpoint to run workflows.")}}),e._v(" "),t("br"),e._v(" "),t("div",{staticClass:"my-2"},[t("span",[e._v("\n            Use a public WES endpoint, or run your own WES using the\n            "),t("a",{attrs:{href:"https://github.com/sapporo-wes/sapporo-service"}},[e._v("\n              Sapporo-service\n            ")])])])])]),e._v(" "),e.services.length?t("v-data-table",{staticClass:"mx-12 my-2",attrs:{headers:e.serviceHeaders,"hide-default-footer":"","item-key":"id",items:e.services,"items-per-page":Number(-1)},scopedSlots:e._u([{key:"item.name",fn:function(r){var n=r.item;return[t("div",{staticClass:"d-flex"},[t("nuxt-link",{style:{textDecoration:"none"},attrs:{to:{path:"/services",query:{serviceId:n.id}}},domProps:{textContent:e._s(n.name)}}),e._v(" "),n.preRegistered?t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(r){var n=r.on;return[t("v-icon",e._g({staticClass:"ml-2",attrs:{color:e.$colors.indigo.darken1,small:""},domProps:{textContent:e._s("mdi-account-check-outline")}},n))]}}],null,!0)},[e._v(" "),t("span",{domProps:{textContent:e._s("Pre-registered WES endpoint")}})]):e._e()],1)]}},{key:"item.addedDate",fn:function(r){var n=r.item;return[t("span",{domProps:{textContent:e._s(e.$dayjs(n.addedDate).local().format("YYYY-MM-DD HH:mm:ss"))}})]}},{key:"item.state",fn:function(r){var n=r.item;return[t("v-chip",{attrs:{color:e.$store.getters["services/stateColor"](n.id),"text-color":"white"},domProps:{textContent:e._s(n.state)}})]}},{key:"item.delete",fn:function(r){var n=r.item;return[t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on;return[t("v-icon",e._g({attrs:{color:e.$colors.grey.darken2,disabled:n.preRegistered},domProps:{textContent:e._s("mdi-trash-can-outline")},on:{click:function(t){t.stopPropagation(),e.selectedServices=[n],e.deleteDialogShow=!0}}},n.preRegistered&&o))]}}],null,!0)},[e._v(" "),t("span",{domProps:{textContent:e._s("This service is pre-registered and cannot be removed.")}})])]}}],null,!0),model:{value:e.selectedServices,callback:function(t){e.selectedServices=t},expression:"selectedServices"}}):e._e(),e._v(" "),t("div",{staticClass:"d-flex justify-end pb-6 mr-12 mt-4"},[t("v-btn",{attrs:{color:"primary",outlined:"",width:"140"},on:{click:function(t){t.stopPropagation(),e.registerDialogShow=!0}}},[t("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-sticker-plus-outline")}}),e._v(" "),t("span",{domProps:{textContent:e._s("Register")}})],1)],1),e._v(" "),t("service-register-dialog",{attrs:{"dialog-show":e.registerDialogShow},on:{close:function(t){e.registerDialogShow=!1}}}),e._v(" "),t("service-delete-dialog",{attrs:{"dialog-show":e.deleteDialogShow,"selected-items":e.selectedServices},on:{close:function(t){e.deleteDialogShow=!1,e.selectedServices=[]}}})],1)}),[],!1,null,null,null),T=W.exports;h()(W,{VBtn:x.a,VCard:_.a,VChip:O.a,VDataTable:E.a,VIcon:y.a,VTooltip:B.a});var A=Object(o.b)({components:{AppBar:c.a,AppFooter:l.a,BreadcrumbsHeader:d.a,ServiceCard:T},middleware:function(e){var t=e.store;window.onNuxtReady(Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[t.dispatch("services/updateAllServices")],e.next=3,Promise.all(r);case 3:case"end":return e.stop()}}),e)}))))}}),N=r(421),H=r(425),Y=r(423),F=Object(m.a)(A,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-app",[t("app-bar"),e._v(" "),t("v-main",{staticClass:"background"},[t("v-container",{attrs:{fluid:""}},[t("breadcrumbs-header"),e._v(" "),t("service-card",{staticClass:"mx-auto mb-4"})],1)],1),e._v(" "),t("app-footer")],1)}),[],!1,null,null,null);t.default=F.exports;h()(F,{VApp:N.a,VContainer:H.a,VMain:Y.a})}}]);